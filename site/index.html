<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TrueCloud | AWS EKS Portfolio</title>
    <meta
      name="description"
      content="Portfolio project: Terraform on AWS (VPC + EKS + ECR) with Kubernetes, Docker, and GitHub Actions CI/CD."
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="header">
      <div class="container header__inner">
        <div class="brand">
          <div class="brand__mark">TC</div>
          <div class="brand__text">
            <div class="brand__name">TrueCloud</div>
            <div class="brand__tag">AWS • TERRAFORM • EKS • Kubernetes • CI/CD</div>
          </div>
        </div>
        <nav class="nav">
          <a href="#overview">Overview</a>
          <a href="#highlights">Highlights</a>
          <a href="#architecture">Architecture</a>
          <a href="#components">Components</a>
          <a href="#pipeline">CI/CD</a>
          <a href="#howto">How to run</a>
          <a href="#cost">Cost</a>
          <a href="#security">Security</a>
        </nav>
        <div class="nav-cta">
          <a class="btn btn--small btn--ghost" href="https://github.com/rgtrovao/portfolio" target="_blank" rel="noreferrer">
            GitHub
          </a>
          <a class="btn btn--small btn--primary" href="https://www.linkedin.com/in/rgtrovao" target="_blank" rel="noreferrer">
            LinkedIn
          </a>
        </div>
      </div>
    </header>

    <main>
      <section class="hero" id="overview">
        <div class="container hero__inner">
          <div class="hero__text">
            <h1>End-to-end AWS EKS platform, built with Terraform</h1>
            <p class="lead">
              This page is served by a <strong>Docker</strong> image running on <strong>EKS</strong> (2 pods) behind an
              <strong>internet-facing ALB</strong> with <strong>HTTP → HTTPS redirect</strong> and TLS termination.
            </p>
            <div class="pill-row">
              <span class="pill">Region: us-east-1</span>
              <span class="pill">Kubernetes: 1.33</span>
              <span class="pill">Nodes: 2 (t3.small • SPOT)</span>
              <span class="pill">Pods: 2</span>
              <span class="pill">Host: www.truecloud.com.br</span>
            </div>
            <div class="chip-row" aria-label="Technology stack">
              <span class="chip">Terraform</span>
              <span class="chip">AWS</span>
              <span class="chip">VPC</span>
              <span class="chip">EKS</span>
              <span class="chip">Kubernetes</span>
              <span class="chip">Docker</span>
              <span class="chip">ECR</span>
              <span class="chip">GitHub Actions</span>
              <span class="chip">OIDC</span>
              <span class="chip">IRSA</span>
              <span class="chip">ALB Ingress</span>
            </div>
            <div class="cta-row">
              <a class="btn btn--primary" href="#architecture">View architecture</a>
              <a class="btn btn--ghost" href="#pipeline">See CI/CD flow</a>
            </div>
          </div>

          <div class="hero__card">
            <div class="card-title">What’s provisioned</div>
            <ul class="checklist">
              <li>VPC with 6 subnets (2 public, 2 private, 2 db)</li>
              <li>IGW + public routing, 1 NAT Gateway for private egress</li>
              <li>EKS 1.33 + managed node group (2× t3.small, SPOT)</li>
              <li>ECR repo for app images (created manually to preserve history)</li>
              <li>GitHub Actions OIDC role for ECR push</li>
              <li>AWS Load Balancer Controller installed by Terraform (Helm + IRSA)</li>
              <li>ALB Ingress with TLS (ACM) + redirect</li>
            </ul>
            <div class="muted small">
              No sensitive identifiers are shown (no account IDs, ARNs, resource IDs, or outputs).
            </div>
          </div>
        </div>
      </section>

      <section class="section" id="highlights">
        <div class="container">
          <h2>Highlights</h2>
          <p class="muted">
            A curated set of decisions and practices demonstrated by this project. This is the kind of work I enjoy: IaC,
            platform engineering, and pragmatic automation.
          </p>

          <div class="grid">
            <div class="tile">
              <div class="tile-title">Infrastructure as Code</div>
              <div class="tile-body">
                Modular Terraform layout with environment composition, clear inputs/outputs, and reproducible provisioning.
              </div>
            </div>
            <div class="tile">
              <div class="tile-title">Security by design</div>
              <div class="tile-body">
                GitHub Actions uses OIDC to assume a dedicated IAM role (no long-lived AWS keys). EKS workloads run in private
                subnets behind an ALB.
              </div>
            </div>
            <div class="tile">
              <div class="tile-title">Operational workflow</div>
              <div class="tile-body">
                One <code>terraform apply</code> provisions infra and installs the AWS Load Balancer Controller; one
                <code>kubectl apply</code> deploys the app and Ingress.
              </div>
            </div>
            <div class="tile">
              <div class="tile-title">Versioned images & rollback</div>
              <div class="tile-body">
                CI pushes both <code>:latest</code> and <code>:&lt;commit-sha&gt;</code> tags to ECR. Rollbacks can pin a known
                good SHA tag.
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="section" id="architecture">
        <div class="container">
          <h2>Architecture</h2>
          <p class="muted">
            The diagram below describes the complete solution: network, EKS, container registry, CI/CD and the web entrypoint.
          </p>

          <div class="panel">
            <div class="panel-header">
              <div>
                <div class="panel-title">Solution diagram</div>
                <div class="panel-subtitle">Offline SVG (no external dependencies)</div>
              </div>
              <button class="btn btn--small btn--ghost" data-copy="archSummary">Copy summary</button>
            </div>

            <div class="diagram-wrap" role="img" aria-label="Architecture diagram">
              <figure class="diagram-figure">
                <img
                  class="diagram-img"
                  src="diagrams/aws_cicd_architecture.svg"
                  alt="AWS CI/CD Architecture - Deploy and Traffic Flow"
                  loading="lazy"
                />
                <figcaption class="diagram-caption">
                  <a class="diagram-link" href="diagrams/aws_cicd_architecture.svg" target="_blank" rel="noreferrer">Open full size</a>
                </figcaption>
              </figure>
            </div>

            <div class="panel-footer">
              <pre class="copy-block" id="archSummary"><code>Architecture summary (high level)
- Terraform provisions VPC + EKS and installs AWS Load Balancer Controller (Helm + IRSA).
- GitHub Actions uses OIDC to assume an IAM role and push versioned Docker images to ECR.
- EKS runs 2 nginx pods behind an internet-facing ALB Ingress with HTTP→HTTPS redirect and TLS.
- Workloads run in private subnets; DB subnets are isolated (no internet route).</code></pre>
            </div>
          </div>
        </div>
      </section>

      <section class="section" id="components">
        <div class="container">
          <h2>Components</h2>
          <div class="grid">
            <div class="tile">
              <div class="tile-title">Terraform (IaC)</div>
              <div class="tile-body">
                Modular Terraform structure provisioning VPC, EKS, ECR and GitHub OIDC integration.
              </div>
            </div>
            <div class="tile">
              <div class="tile-title">VPC</div>
              <div class="tile-body">
                2 public subnets, 2 private subnets, 2 isolated db subnets across 2 AZs, with a single NAT Gateway (cost-optimized).
              </div>
            </div>
            <div class="tile">
              <div class="tile-title">EKS</div>
              <div class="tile-body">
                Kubernetes 1.33, managed node group (2 nodes, t3.small • SPOT), workloads scheduled on private subnets.
              </div>
            </div>
            <div class="tile">
              <div class="tile-title">Ingress (ALB)</div>
              <div class="tile-body">
                AWS Load Balancer Controller (installed by Terraform via Helm + IRSA) creates an ALB with listeners 80/443, redirect and ACM TLS termination.
              </div>
            </div>
            <div class="tile">
              <div class="tile-title">ECR</div>
              <div class="tile-body">
                Repository created manually to preserve image history. Lifecycle rules are configured in the AWS Console to control retention/cost.
              </div>
            </div>
            <div class="tile">
              <div class="tile-title">Docker</div>
              <div class="tile-body">
                Static website bundled into an nginx image via <code>Dockerfile</code> and deployed as a Kubernetes Deployment.
              </div>
            </div>
          </div>

          <div class="callout">
            <div class="callout-title">No sensitive identifiers</div>
            <div class="callout-body">
              This page intentionally omits account IDs, ARNs, resource IDs, and Terraform outputs.
            </div>
          </div>
        </div>
      </section>

      <section class="section" id="pipeline">
        <div class="container">
          <h2>CI/CD (GitHub Actions → ECR → EKS)</h2>
          <ol class="steps">
            <li>Developer pushes to <code>main</code></li>
            <li>GitHub Actions uses OIDC to assume an IAM role (no long-lived AWS keys)</li>
            <li>Pipeline builds the container image and pushes to ECR</li>
            <li>EKS nodes pull the image from ECR and run the updated pods</li>
          </ol>
          <p class="muted">
            Provisioning workflow: run <code>terraform apply</code> once (infra + controller), then run
            <code>kubectl apply -f k8s/apps/portfolio-nginx/</code> once (app + ingress).
          </p>
          <p class="muted">
            Repository: <a href="https://github.com/rgtrovao/portfolio" target="_blank" rel="noreferrer">rgtrovao/portfolio</a> •
            LinkedIn: <a href="https://www.linkedin.com/in/rgtrovao" target="_blank" rel="noreferrer">/in/rgtrovao</a>
          </p>
        </div>
      </section>

      <section class="section" id="howto">
        <div class="container">
          <h2>How to run (high level)</h2>
          <p class="muted">
            The exact commands may vary by environment, but the intent is intentionally simple: provision infra once, apply manifests once.
          </p>

          <div class="grid">
            <div class="tile">
              <div class="tile-title">Provision infrastructure</div>
              <div class="tile-body">
                <p class="muted small">Terraform provisions VPC/EKS and installs the AWS Load Balancer Controller.</p>
                <pre class="copy-block"><code>cd environments/personal
terraform init -upgrade
terraform apply</code></pre>
              </div>
            </div>
            <div class="tile">
              <div class="tile-title">Deploy the app</div>
              <div class="tile-body">
                <p class="muted small">Configure kubeconfig, then apply the Kubernetes manifests.</p>
                <pre class="copy-block"><code>aws eks update-kubeconfig --region us-east-1 --name projeto-eks-personal
kubectl apply -f k8s/apps/portfolio-nginx/</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="section" id="cost">
        <div class="container">
          <h2>Cost notes</h2>
          <div class="grid">
            <div class="tile">
              <div class="tile-title">Single NAT Gateway</div>
              <div class="tile-body">
                NAT Gateway is one of the most expensive building blocks in small labs. This project uses a single NAT to reduce cost.
              </div>
            </div>
            <div class="tile">
              <div class="tile-title">EKS control plane</div>
              <div class="tile-body">
                EKS has a fixed hourly cost for the control plane. This is acceptable for a portfolio, but not “free”.
              </div>
            </div>
            <div class="tile">
              <div class="tile-title">ECR retention</div>
              <div class="tile-body">
                Lifecycle rules (configured manually in the AWS Console) help prevent ECR storage growth over time.
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="section" id="security">
        <div class="container">
          <h2>Security notes</h2>
          <ul class="bullets">
            <li>OIDC trust policy restricted to <code>rgtrovao/portfolio</code> and <code>refs/heads/main</code></li>
            <li>HTTPS enabled with ACM certificate and HTTP→HTTPS redirect</li>
            <li>DB subnets are isolated (no default route to internet)</li>
            <li>Workloads run in private subnets</li>
          </ul>
          <p class="muted">
            Tip: restrict the EKS public endpoint CIDRs after bootstrap to reduce exposure.
          </p>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container footer__inner">
        <div class="small muted">© TrueCloud • Portfolio running on EKS</div>
        <div class="small muted">
          Built with Terraform + Kubernetes •
          <a href="https://github.com/rgtrovao/portfolio" target="_blank" rel="noreferrer">GitHub</a> •
          <a href="https://www.linkedin.com/in/rgtrovao" target="_blank" rel="noreferrer">LinkedIn</a>
        </div>
      </div>
    </footer>

    <script src="app.js"></script>
  </body>
</html>

